# 低フレームレートビデオ撮影用ツール

技術の進歩と高度な機能を持つ機器の普及により、手軽に高品質なビデオの撮影や配信ができるようになりました。
しかし、高品質なビデオをネットワークを用いて配信すると、ネットワークに多くのデータを流すことになり、
ネットワークの混雑によって遅延や乱れが発生したり、携帯電話のインターネットアクセスサービスなどでは通信費が高額になるといった問題が起こります。

ビデオを利用しないようにすることで、ネットワークに流れるデータ量を削減するという方法もありますが、どうしてもビデオを利用したい場面もあります。
多くの場合、画面の解像度（画面の鮮明さ）は必要ですが、フレームレート（動きのスムーズさ）は不要なことが多く、
フレームレートを落とすことでネットワークを流れるデータ量を減らすことができます。

多くのビデオ会議アプリ等は、カメラ映像をそのまま送信することしかできず、フレームレートを落とす仕組みを持っていません。
もし、ビデオ会議アプリ等が画面共有の仕組みを持っている場合、フレームレートを落としたカメラ映像を画面に表示するツールがあれば、
フレームレートを落としたカメラ映像を送信することができます。

そのような方法を実現するためのツールをHTML5+Javascriptで作成してみました。
このツールはカメラで撮影された映像を画面上に表示するだけの機能を提供します。
単独で配信や記録は行いません。

このツールを利用することで、1Mbpsを超えるネットワーク帯域を100～200Kbps程度に抑えることができます。

コメント、改善などありましたらお知らせください。

## 必要なシステム

- ビデオ会議アプリの画面共有機能など、画面上に表示された画像をネットワークを利用して送信するアプリ
- Windows/Macなどで動作するHTML5/WebRTCに対応したブラウザ(Chrome,Safari,Firefoxなど)
- ビデオ会議アプリなどで認識可能な標準的なカメラ(iVCamなどのツールなども利用できます)

## 利用方法

1. ブラウザを起動してツールのWebページをアクセスする
   - **低フレームレートビデオ撮影用ツール** [Slow-Camera](slow-camera)
   - タブで開くより新たなウィンドウで開く方が良いかもしれません
2. 選択肢に認識できるカメラの一覧が表示されるので、利用したいカメラを選択する
3. 「Start」をクリックして撮影開始
   - カメラのアクセス許可の確認が出る場合は、許可してください
   - 再度「Start」をクリックすると撮影が停止します（カメラが他のアプリで利用できるようになります）
4. 表示の時間間隔はIntervalで変更することができます
   - 単位はミリ秒です(1000で1秒)
   - 数字を変更したら「Set」をクリックします
   - 時間間隔を増やすほど、ネットワークにかかる負担（消費帯域）が減ります
5. 一時停止
   - 画面の映像を一時的に止めたい場合は「Pause」をクリックします
   - 再度「Pause」をクリックすると再開します
   - 一時停止の間もカメラに接続した状態なので、同じカメラを他のアプリから利用することはできません）
6. ライブモニター
   - フレームレートを落とさないオリジナルのカメラ映像も表示します
   - 端末によっては、オリジナルのカメラ映像（の一部）が画面上に表示されていないと、ビデオが停止してしまうことがあります。
   そのような場合は、ライブモニターが少しだけ見えるように表示位置を調整しておくことで利用することができます。

## 応用編

### 1. 画面共有で低フレームレートのカメラ映像を送信する（最も基本的な利用方法）

- 内蔵カメラがない、内蔵カメラの解像度が低いといった場合は、スマートフォン等のカメラと連携するツール（iVCam）などを利用します
  - iVCamはネットワークを介したカメラ映像の伝送が可能ですが、スマートフォンをパソコンにUSB接続した方が簡単確実で、ネットワークに余計な負荷をかけません
- 全画面で画面共有する場合は、「低フレームレートビデオ撮影用ツール」を起動しているブラウザを全画面表示にし、さらにブラウザの「表示」メニューにあるズームの機能などで、ブラウザ内に表示されている映像のサイズを画面に合わせてください
- アプリを指定した画面共有の場合は、ブラウザ内に表示されている映像のサイズにウィンドウを合わせるだけでOKです

### 2. 通常のカメラ映像として低フレームレートのカメラ映像を送信する

資料の画面共有しながら、低フレームレートのカメラ映像を同時に送信したい場合は、低フレームレート化したものをカメラ映像として入力する必要があります。
さらに別のパソコンと画面キャプチャ装置（標準的なカメラとして認識されるもの）を用意することで実現することができます。

- 「低フレームレートビデオ撮影用ツール」を動作させる「別のパソコン」を用意する（上記1の要領）
- 用意した「別のパソコン」の画面出力（プロジェクタ等に接続する端子）を画面キャプチャ装置に接続
- ビデオ会議アプリを利用するパソコンに画面キャプチャ装置をUSB接続し、カメラとして認識させる
- ビデオ会議アプリのカメラ入力切替で、画面キャプチャ装置を選択する

画面キャプチャ装置に関する参考情報

- [キャプチャーボードの人気おすすめ10選](https://eco-points.jp/901)
- [ビデオキャプチャー の売れ筋ランキング](https://www.hikaku.com/ec_shopping/ec/keywordSearch/3/49406)
- [キャプチャーボードの人気おすすめランキング15選](https://ranking.goo.ne.jp/select/5421)

(2020年4月23日)
